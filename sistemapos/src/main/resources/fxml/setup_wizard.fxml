<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.nap.pos.ui.controller.SetupWizardController"
            stylesheets="@../css/setup_wizard.css"
            styleClass="wizard-root"
            prefWidth="820" prefHeight="580">

    <!-- ═══════════════════════════════════════════════ CABECERA ══ -->
    <top>
        <VBox styleClass="wizard-header" spacing="12">
            <padding><Insets top="20" right="32" bottom="16" left="32"/></padding>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="NAP POS" styleClass="wizard-brand"/>
                <Label text="—  Configuración inicial" styleClass="wizard-subtitle"/>
            </HBox>

            <!-- Indicadores de paso: ① — ② — ③ -->
            <HBox alignment="CENTER" spacing="8">
                <Label fx:id="indicador1" text="1" styleClass="indicador-activo"/>
                <Label text="────" styleClass="indicador-linea"/>
                <Label fx:id="indicador2" text="2" styleClass="indicador-inactivo"/>
                <Label text="────" styleClass="indicador-linea"/>
                <Label fx:id="indicador3" text="3" styleClass="indicador-inactivo"/>
            </HBox>
        </VBox>
    </top>

    <!-- ═══════════════════════════════════════════════ CONTENIDO ══ -->
    <center>
        <StackPane styleClass="wizard-content">

            <!-- ─────────────────────── PASO 1 : Tipo de negocio ── -->
            <VBox fx:id="paso1" styleClass="paso-container"
                  alignment="CENTER" spacing="36">

                <Label text="¿Cómo opera tu negocio?" styleClass="paso-titulo"/>

                <HBox alignment="CENTER" spacing="40">

                    <!-- Tarjeta Persona Natural -->
                    <VBox fx:id="tarjetaNatural" styleClass="tarjeta tarjeta-seleccionada"
                          alignment="CENTER" spacing="10"
                          onMouseClicked="#onNatural">
                        <padding><Insets top="24" right="32" bottom="24" left="32"/></padding>
                        <RadioButton fx:id="rbNatural" onAction="#onNatural"
                                     styleClass="tarjeta-radio"/>
                        <Label text="&#128100;" styleClass="tarjeta-icono"/>
                        <Label text="Persona Natural" styleClass="tarjeta-titulo"/>
                        <Label text="Trabajas como persona física.&#10;Se registra tu cédula."
                               styleClass="tarjeta-desc" wrapText="true"
                               textAlignment="CENTER" maxWidth="180"/>
                    </VBox>

                    <!-- Tarjeta Persona Jurídica -->
                    <VBox fx:id="tarjetaJuridica" styleClass="tarjeta"
                          alignment="CENTER" spacing="10"
                          onMouseClicked="#onJuridica">
                        <padding><Insets top="24" right="32" bottom="24" left="32"/></padding>
                        <RadioButton fx:id="rbJuridica" onAction="#onJuridica"
                                     styleClass="tarjeta-radio"/>
                        <Label text="&#127970;" styleClass="tarjeta-icono"/>
                        <Label text="Persona Jurídica" styleClass="tarjeta-titulo"/>
                        <Label text="Empresa, sociedad o comercio.&#10;Se registra el NIT."
                               styleClass="tarjeta-desc" wrapText="true"
                               textAlignment="CENTER" maxWidth="180"/>
                    </VBox>

                </HBox>
            </VBox>

            <!-- ─────────────────────── PASO 2 : Datos básicos ──── -->
            <VBox fx:id="paso2" styleClass="paso-container"
                  alignment="TOP_CENTER" spacing="20"
                  visible="false" managed="false">
                <padding><Insets top="8"/></padding>

                <Label text="Información del negocio" styleClass="paso-titulo"/>

                <!-- Nombre de la tienda (siempre visible) -->
                <GridPane styleClass="form-grid" hgap="16" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints minWidth="160" prefWidth="160"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>
                    <Label text="Nombre de la tienda *" styleClass="form-label"
                           GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <TextField fx:id="txtNombreTienda"
                               promptText="Ej: Tienda La Esperanza"
                               GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                </GridPane>

                <!-- Grupo Persona Natural -->
                <VBox fx:id="grupoNatural" spacing="0">
                    <GridPane styleClass="form-grid" hgap="16" vgap="12">
                        <columnConstraints>
                            <ColumnConstraints minWidth="160" prefWidth="160"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>
                        <Label text="Nombre *" styleClass="form-label"
                               GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="txtNombre" promptText="Nombre del titular"
                                   GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                        <Label text="Apellido *" styleClass="form-label"
                               GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="txtApellido" promptText="Apellido del titular"
                                   GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        <Label text="Cédula *" styleClass="form-label"
                               GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextField fx:id="txtCedula" promptText="Número de cédula"
                                   GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>

                <!-- Grupo Persona Jurídica -->
                <VBox fx:id="grupoJuridica" spacing="0" visible="false" managed="false">
                    <GridPane styleClass="form-grid" hgap="16" vgap="12">
                        <columnConstraints>
                            <ColumnConstraints minWidth="160" prefWidth="160"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>
                        <Label text="Razón social *" styleClass="form-label"
                               GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="txtRazonSocial"
                                   promptText="Nombre legal de la empresa"
                                   GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                        <Label text="NIT *" styleClass="form-label"
                               GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="txtNit" promptText="NIT de la empresa"
                                   GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                    </GridPane>
                </VBox>

            </VBox>

            <!-- ─────────────────────── PASO 3 : Logo y dirección ── -->
            <VBox fx:id="paso3" styleClass="paso-container"
                  alignment="TOP_CENTER" spacing="24"
                  visible="false" managed="false">
                <padding><Insets top="8"/></padding>

                <Label text="Últimos detalles" styleClass="paso-titulo"/>

                <!-- Logo -->
                <HBox alignment="CENTER_LEFT" spacing="24" styleClass="logo-section">
                    <ImageView fx:id="imgLogo"
                               fitWidth="120" fitHeight="120"
                               preserveRatio="true"
                               styleClass="logo-preview"/>
                    <VBox spacing="8" alignment="CENTER_LEFT">
                        <Label text="Logo de la tienda (opcional)" styleClass="form-label"/>
                        <Label fx:id="lblRutaLogo" text="Sin logo seleccionado"
                               styleClass="logo-path"/>
                        <Button text="Seleccionar imagen..."
                                onAction="#onSeleccionarLogo"
                                styleClass="btn-secundario"/>
                    </VBox>
                </HBox>

                <!-- Dirección -->
                <VBox spacing="6">
                    <Label text="Dirección *" styleClass="form-label"/>
                    <TextArea fx:id="txtDireccion"
                              promptText="Dirección completa del negocio"
                              prefRowCount="3" wrapText="true"/>
                </VBox>

            </VBox>

        </StackPane>
    </center>

    <!-- ═══════════════════════════════════════════════ PIE ══ -->
    <bottom>
        <HBox styleClass="wizard-footer" alignment="CENTER_LEFT" spacing="12">
            <padding><Insets top="16" right="32" bottom="20" left="32"/></padding>
            <Button fx:id="btnAnterior" text="← Anterior"
                    onAction="#onAnterior"
                    styleClass="btn-secundario"
                    visible="false"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="btnSiguiente" text="Siguiente →"
                    onAction="#onSiguiente"
                    styleClass="btn-primario"/>
        </HBox>
    </bottom>

</BorderPane>
